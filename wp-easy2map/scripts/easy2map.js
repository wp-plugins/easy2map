jQuery(function(){easy2map_functions.initialise_all_easy2maps()});var easy2map_functions=(function(){ajax_location=function(a){var b=a.split("_");var c=b[b.length-1];return jQuery("#easy2map_ajax_url_"+c).val()};insertNewMapPoint=function(c,g){var b=new google.maps.Marker({position:new google.maps.LatLng(c.lattitude,c.longitude),draggable:false,map:g,title:c.title.replace(/\\/gi,""),ID:c.ID,icon:c.icon,pinHTML:c.pinHTML});var e=jQuery.xml2json(c.settings);var a=1;var f="";if(e.load&&e.load!=""){a=parseInt(e.load)}if(e.url&&e.url!=""&&e.url!="http://"){f=e.url}if(a===1||(a===3&&f==="")){google.maps.event.addListener(b,"click",function(i){var h=new google.maps.InfoWindow();h.setContent(b.pinHTML);h.open(b.map,b)})}if(a===2){var d=new google.maps.InfoWindow();d.setContent(b.pinHTML);d.open(b.map,b)}if(a===3&&f!=""){google.maps.event.addListener(b,"click",function(h){window.location.href=f})}return b};replaceAll=function(b,a,d){var c=b.indexOf(a);while(c!=-1){b=replaceChars(b,c,a.length,d);c=b.indexOf(a)}return b};replaceChars=function(a,d,b,c){if(d<0){d=0}if(d>=a.length){d=a.length-1}if(b<0){b=0}if(b>a.length){b=a.length}return(a.substring(0,d)+c+a.substring(d+b))};retrieve_map_pins=function(f,e,b,h,g){var d=e.split("_");var a=d[d.length-1];var c={action:"retrieve_map_points",MapID:a,maxPins:b};jQuery.ajax({type:"POST",url:ajax_location(e),data:c,dataType:"json",success:function(n){if(typeof n=="undefined"||typeof n=="null"){return}if(!n){return}if(n.length==0){return}for(var m=0;m<n.length;m++){var o=replaceAll(replaceAll(replaceAll(n[m].LatLong," ",""),"(",""),")","").split(",");var k={lattitude:o[0],longitude:o[1],title:n[m].Title,ID:n[m].ID,icon:n[m].ImageURL,settings:n[m].Settings,pinHTML:n[m].MapPinHTML};h.push(k)}var j=[];for(var l=0;l<h.length;l++){j.push(insertNewMapPoint(h[l],f))}}})};retrieve_map_settings=function(d){var c;var e=[];var b=d.split("_");var a=b[b.length-1];jQuery.ajax({type:"POST",url:ajax_location(d),dataType:"json",data:{mapID:a,action:"retrieve_map_settings"},success:function(i){var t=jQuery.xml2json(i.Settings);var h=t.lattitude;var j=t.longitude;var s=parseInt(t.zoom);var q=new google.maps.LatLng(h,j);var p=t.mapType.toUpperCase();var o=t.mapTypeControl_style.toUpperCase();var u=t.mapTypeControl_position.toUpperCase();var r=t.zoomControl_style.toUpperCase();var l=t.zoomControl_position.toUpperCase();var m=t.zoomControl_position.toUpperCase();if(p==="ROADMAP"){p=google.maps.MapTypeId.ROADMAP}else{if(p==="HYBRID"){p=google.maps.MapTypeId.HYBRID}else{if(p==="SATELLITE"){p=google.maps.MapTypeId.SATELLITE}else{if(p==="TERRAIN"){p=google.maps.MapTypeId.TERRAIN}else{p=google.maps.MapTypeId.ROADMAP}}}}if(o==="DEFAULT"){o=google.maps.MapTypeControlStyle.DEFAULT}else{if(o==="DROPDOWN_MENU"){o=google.maps.MapTypeControlStyle.DROPDOWN_MENU}else{if(o==="SATELLITE"){o=google.maps.MapTypeControlStyle.SATELLITE}else{o=google.maps.MapTypeControlStyle.DEFAULT}}}if(u==="TOP_LEFT"){u=google.maps.ControlPosition.TOP_LEFT}else{if(u==="TOP_RIGHT"){u=google.maps.ControlPosition.TOP_RIGHT}else{if(u==="TOP_CENTER"){u=google.maps.ControlPosition.TOP_CENTER}else{u=google.maps.ControlPosition.TOP_RIGHT}}}if(r==="DEFAULT"){r=google.maps.ZoomControlStyle.DEFAULT}else{if(r==="LARGE"){r=google.maps.ZoomControlStyle.LARGE}else{r=google.maps.ZoomControlStyle.SMALL}}if(l==="TOP_LEFT"){l=google.maps.ControlPosition.TOP_LEFT}else{if(l==="TOP_RIGHT"){l=google.maps.ControlPosition.TOP_RIGHT}else{if(l==="TOP_CENTER"){l=google.maps.ControlPosition.TOP_CENTER}else{l=google.maps.ControlPosition.TOP_RIGHT}}}if(m==="TOP_LEFT"){m=google.maps.ControlPosition.TOP_LEFT}else{if(m==="TOP_RIGHT"){m=google.maps.ControlPosition.TOP_RIGHT}else{if(m==="TOP_CENTER"){m=google.maps.ControlPosition.TOP_CENTER}else{m=google.maps.ControlPosition.TOP_RIGHT}}}var g={zoom:s,center:q,mapTypeId:p,mapTypeControl:!!parseInt(t.mapTypeControl),mapTypeControlOptions:{style:o,position:u},zoomControl:!!parseInt(t.zoomControl),navigationControl:true,zoomControlOptions:{style:r,position:l},scaleControl:!!parseInt(t.scaleControl),scaleControlOptions:{position:m},streetViewControl:!!parseInt(t.streetViewControl),panControl:!!parseInt(t.panControl),draggable:!!parseInt(t.draggable)};c=new google.maps.Map(document.getElementById(d),g);if(!!parseInt(t.trafficlayer)){var f=new google.maps.TrafficLayer();f.setMap(c)}if(!!parseInt(t.transitlayer)){var n=new google.maps.TransitLayer();n.setMap(c)}if(!!parseInt(t.bicyclelayer)){var k=new google.maps.BicyclingLayer();k.setMap(c)}google.maps.event.addDomListener(window,"load",retrieve_map_pins(c,d,250,e,t))}})};return{initialise_all_easy2maps:function(){jQuery("div [id ^= easy2map_canvas_]").each(function(){var a=jQuery(this).attr("id");retrieve_map_settings(a)})}}})();